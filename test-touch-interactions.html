<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Touch Interaction Tests - Singularity</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .touch-test-container {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .test-section {
            margin: 30px 0;
            padding: 20px;
            background: var(--card-bg);
            border-radius: 8px;
            border: 1px solid var(--primary-light);
        }
        
        .test-section h3 {
            color: var(--accent);
            margin-bottom: 15px;
        }
        
        .touch-target {
            display: inline-block;
            margin: 10px;
            padding: 15px 20px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
            min-height: 44px;
            min-width: 44px;
            text-align: center;
            user-select: none;
        }
        
        .touch-target.small {
            min-height: 32px;
            min-width: 32px;
            padding: 8px 12px;
            font-size: 12px;
        }
        
        .touch-target.large {
            min-height: 60px;
            min-width: 60px;
            padding: 20px 25px;
            font-size: 18px;
        }
        
        .touch-target:active,
        .touch-target.touch-active {
            transform: scale(0.95);
            background: var(--primary-light);
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .gesture-area {
            width: 100%;
            height: 200px;
            background: var(--background);
            border: 2px dashed var(--primary-light);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
            font-size: 14px;
            text-align: center;
            position: relative;
            overflow: hidden;
            touch-action: manipulation;
        }
        
        .gesture-feedback {
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            background: rgba(0, 194, 255, 0.1);
            padding: 8px;
            border-radius: 4px;
            font-size: 12px;
            font-family: monospace;
            color: var(--accent);
        }
        
        .scroll-test {
            height: 150px;
            overflow-y: auto;
            background: var(--background);
            border: 1px solid var(--primary-light);
            border-radius: 6px;
            padding: 15px;
            -webkit-overflow-scrolling: touch;
        }
        
        .scroll-content {
            height: 400px;
            background: linear-gradient(to bottom, 
                var(--primary) 0%, 
                var(--primary-light) 50%, 
                var(--accent) 100%);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .interaction-log {
            background: var(--background-dark);
            border: 1px solid var(--primary-light);
            border-radius: 6px;
            padding: 15px;
            height: 200px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 12px;
            color: var(--text-light);
        }
        
        .log-entry {
            margin: 2px 0;
            padding: 2px 0;
            border-bottom: 1px solid rgba(75, 107, 220, 0.1);
        }
        
        .log-entry.touch-start { color: var(--success); }
        .log-entry.touch-move { color: var(--warning); }
        .log-entry.touch-end { color: var(--info); }
        .log-entry.gesture { color: var(--accent); }
        
        .performance-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .metric-card {
            background: var(--background);
            padding: 15px;
            border-radius: 6px;
            text-align: center;
            border: 1px solid var(--primary-light);
        }
        
        .metric-value {
            font-size: 24px;
            font-weight: bold;
            color: var(--accent);
        }
        
        .metric-label {
            font-size: 12px;
            color: var(--text-muted);
            margin-top: 5px;
        }
        
        .clear-log {
            background: var(--danger);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin-bottom: 10px;
            min-height: 44px;
        }
        
        @media (max-width: 767px) {
            .touch-test-container {
                padding: 15px;
            }
            
            .test-section {
                margin: 20px 0;
                padding: 15px;
            }
            
            .performance-metrics {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="touch-test-container">
        <header style="text-align: center; margin-bottom: 30px;">
            <h1 style="color: var(--text-light);">Touch Interaction Validation</h1>
            <p style="color: var(--text-muted);">Test touch gestures, targets, and responsiveness</p>
        </header>
        
        <!-- Touch Target Size Tests -->
        <div class="test-section">
            <h3>Touch Target Size Tests</h3>
            <p style="color: var(--text-muted); margin-bottom: 15px;">
                Test different button sizes. Minimum recommended: 44px × 44px
            </p>
            
            <button class="touch-target small" data-size="small">Small (32px)</button>
            <button class="touch-target" data-size="standard">Standard (44px)</button>
            <button class="touch-target large" data-size="large">Large (60px)</button>
        </div>
        
        <!-- Gesture Recognition Tests -->
        <div class="test-section">
            <h3>Gesture Recognition Tests</h3>
            <p style="color: var(--text-muted); margin-bottom: 15px;">
                Try tap, swipe, pinch, and long press gestures in the area below
            </p>
            
            <div class="gesture-area" id="gesture-area">
                <div class="gesture-feedback" id="gesture-feedback">
                    Waiting for touch input...
                </div>
                <div>
                    Touch here to test gestures<br>
                    <small>Tap • Swipe • Pinch • Long Press</small>
                </div>
            </div>
        </div>
        
        <!-- Scroll Performance Tests -->
        <div class="test-section">
            <h3>Scroll Performance Tests</h3>
            <p style="color: var(--text-muted); margin-bottom: 15px;">
                Test smooth scrolling and momentum
            </p>
            
            <div class="scroll-test" id="scroll-test">
                <div class="scroll-content">
                    Scroll this content to test momentum scrolling
                </div>
            </div>
        </div>
        
        <!-- Navigation Menu Test -->
        <div class="test-section">
            <h3>Navigation Menu Test</h3>
            <p style="color: var(--text-muted); margin-bottom: 15px;">
                Test hamburger menu and navigation interactions
            </p>
            
            <button class="touch-target" onclick="testHamburgerMenu()">
                Test Hamburger Menu
            </button>
            <button class="touch-target" onclick="testNavigation()">
                Test Navigation Links
            </button>
        </div>
        
        <!-- Performance Metrics -->
        <div class="test-section">
            <h3>Performance Metrics</h3>
            <div class="performance-metrics">
                <div class="metric-card">
                    <div class="metric-value" id="touch-events">0</div>
                    <div class="metric-label">Touch Events</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="avg-response">0ms</div>
                    <div class="metric-label">Avg Response</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="gesture-count">0</div>
                    <div class="metric-label">Gestures</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="scroll-events">0</div>
                    <div class="metric-label">Scroll Events</div>
                </div>
            </div>
        </div>
        
        <!-- Interaction Log -->
        <div class="test-section">
            <h3>Interaction Log</h3>
            <button class="clear-log" onclick="clearLog()">Clear Log</button>
            <div class="interaction-log" id="interaction-log"></div>
        </div>
    </div>

    <script>
        class TouchInteractionTester {
            constructor() {
                this.touchEvents = 0;
                this.gestureCount = 0;
                this.scrollEvents = 0;
                this.responseTimes = [];
                this.log = document.getElementById('interaction-log');
                this.gestureArea = document.getElementById('gesture-area');
                this.gestureFeedback = document.getElementById('gesture-feedback');
                
                this.init();
            }
            
            init() {
                this.setupTouchTargets();
                this.setupGestureArea();
                this.setupScrollTest();
                this.updateMetrics();
            }
            
            setupTouchTargets() {
                const touchTargets = document.querySelectorAll('.touch-target');
                
                touchTargets.forEach(target => {
                    let touchStartTime;
                    
                    target.addEventListener('touchstart', (e) => {
                        touchStartTime = performance.now();
                        target.classList.add('touch-active');
                        this.logInteraction('touch-start', `Touch start on ${target.dataset.size || 'button'}`);
                        this.touchEvents++;
                    });
                    
                    target.addEventListener('touchend', (e) => {
                        const responseTime = performance.now() - touchStartTime;
                        this.responseTimes.push(responseTime);
                        target.classList.remove('touch-active');
                        this.logInteraction('touch-end', `Touch end (${responseTime.toFixed(1)}ms)`);
                        this.updateMetrics();
                    });
                    
                    target.addEventListener('click', (e) => {
                        this.logInteraction('gesture', `Click on ${target.textContent}`);
                    });
                });
            }
            
            setupGestureArea() {
                let touchStartTime;
                let touchStartPos = { x: 0, y: 0 };
                let touchCount = 0;
                let longPressTimer;
                let initialDistance = 0;
                
                this.gestureArea.addEventListener('touchstart', (e) => {
                    touchStartTime = performance.now();
                    touchCount = e.touches.length;
                    
                    if (touchCount === 1) {
                        touchStartPos.x = e.touches[0].clientX;
                        touchStartPos.y = e.touches[0].clientY;
                        
                        // Long press detection
                        longPressTimer = setTimeout(() => {
                            this.logInteraction('gesture', 'Long press detected');
                            this.gestureFeedback.textContent = 'Long press detected!';
                            this.gestureCount++;
                            navigator.vibrate && navigator.vibrate(50);
                        }, 500);
                        
                    } else if (touchCount === 2) {
                        // Pinch gesture setup
                        const touch1 = e.touches[0];
                        const touch2 = e.touches[1];
                        initialDistance = Math.sqrt(
                            Math.pow(touch2.clientX - touch1.clientX, 2) +
                            Math.pow(touch2.clientY - touch1.clientY, 2)
                        );
                        this.gestureFeedback.textContent = 'Pinch gesture started';
                    }
                    
                    this.logInteraction('touch-start', `Touch start (${touchCount} finger${touchCount > 1 ? 's' : ''})`);
                });
                
                this.gestureArea.addEventListener('touchmove', (e) => {
                    e.preventDefault();
                    
                    if (touchCount === 1) {
                        const currentX = e.touches[0].clientX;
                        const currentY = e.touches[0].clientY;
                        const deltaX = currentX - touchStartPos.x;
                        const deltaY = currentY - touchStartPos.y;
                        
                        this.gestureFeedback.textContent = `Moving: ${deltaX.toFixed(0)}, ${deltaY.toFixed(0)}`;
                        
                    } else if (touchCount === 2) {
                        const touch1 = e.touches[0];
                        const touch2 = e.touches[1];
                        const currentDistance = Math.sqrt(
                            Math.pow(touch2.clientX - touch1.clientX, 2) +
                            Math.pow(touch2.clientY - touch1.clientY, 2)
                        );
                        
                        const scale = currentDistance / initialDistance;
                        this.gestureFeedback.textContent = `Pinch scale: ${scale.toFixed(2)}`;
                    }
                });
                
                this.gestureArea.addEventListener('touchend', (e) => {
                    clearTimeout(longPressTimer);
                    
                    const touchEndTime = performance.now();
                    const duration = touchEndTime - touchStartTime;
                    
                    if (touchCount === 1 && duration < 200) {
                        const currentX = e.changedTouches[0].clientX;
                        const currentY = e.changedTouches[0].clientY;
                        const deltaX = currentX - touchStartPos.x;
                        const deltaY = currentY - touchStartPos.y;
                        const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
                        
                        if (distance < 10) {
                            this.logInteraction('gesture', 'Tap detected');
                            this.gestureFeedback.textContent = 'Tap detected!';
                            this.gestureCount++;
                        } else if (distance > 50) {
                            const direction = Math.abs(deltaX) > Math.abs(deltaY) 
                                ? (deltaX > 0 ? 'right' : 'left')
                                : (deltaY > 0 ? 'down' : 'up');
                            this.logInteraction('gesture', `Swipe ${direction} (${distance.toFixed(0)}px)`);
                            this.gestureFeedback.textContent = `Swipe ${direction}!`;
                            this.gestureCount++;
                        }
                    } else if (touchCount === 2) {
                        this.logInteraction('gesture', 'Pinch gesture ended');
                        this.gestureFeedback.textContent = 'Pinch gesture ended';
                        this.gestureCount++;
                    }
                    
                    setTimeout(() => {
                        this.gestureFeedback.textContent = 'Waiting for touch input...';
                    }, 2000);
                    
                    this.updateMetrics();
                });
            }
            
            setupScrollTest() {
                const scrollTest = document.getElementById('scroll-test');
                let scrolling = false;
                
                scrollTest.addEventListener('scroll', () => {
                    if (!scrolling) {
                        scrolling = true;
                        this.scrollEvents++;
                        this.logInteraction('touch-move', `Scroll position: ${scrollTest.scrollTop}px`);
                        
                        setTimeout(() => {
                            scrolling = false;
                        }, 100);
                    }
                    
                    this.updateMetrics();
                });
            }
            
            logInteraction(type, message) {
                const timestamp = new Date().toLocaleTimeString();
                const logEntry = document.createElement('div');
                logEntry.className = `log-entry ${type}`;
                logEntry.textContent = `[${timestamp}] ${message}`;
                
                this.log.appendChild(logEntry);
                this.log.scrollTop = this.log.scrollHeight;
                
                // Keep only last 50 entries
                while (this.log.children.length > 50) {
                    this.log.removeChild(this.log.firstChild);
                }
            }
            
            updateMetrics() {
                document.getElementById('touch-events').textContent = this.touchEvents;
                document.getElementById('gesture-count').textContent = this.gestureCount;
                document.getElementById('scroll-events').textContent = this.scrollEvents;
                
                if (this.responseTimes.length > 0) {
                    const avgResponse = this.responseTimes.reduce((a, b) => a + b, 0) / this.responseTimes.length;
                    document.getElementById('avg-response').textContent = `${avgResponse.toFixed(1)}ms`;
                }
            }
        }
        
        function testHamburgerMenu() {
            const hamburger = document.querySelector('.hamburger-menu');
            if (hamburger) {
                hamburger.click();
                tester.logInteraction('gesture', 'Hamburger menu clicked');
            } else {
                tester.logInteraction('gesture', 'Hamburger menu not found (desktop view)');
            }
        }
        
        function testNavigation() {
            const navLinks = document.querySelectorAll('nav a');
            if (navLinks.length > 0) {
                tester.logInteraction('gesture', `Found ${navLinks.length} navigation links`);
                navLinks.forEach((link, index) => {
                    const rect = link.getBoundingClientRect();
                    const touchSize = Math.min(rect.width, rect.height);
                    tester.logInteraction('gesture', 
                        `Nav link ${index + 1}: ${touchSize.toFixed(0)}px touch target`);
                });
            } else {
                tester.logInteraction('gesture', 'No navigation links found');
            }
        }
        
        function clearLog() {
            document.getElementById('interaction-log').innerHTML = '';
            tester.logInteraction('gesture', 'Log cleared');
        }
        
        // Initialize tester
        const tester = new TouchInteractionTester();
        
        // Device capability detection
        window.addEventListener('load', () => {
            const capabilities = {
                touch: 'ontouchstart' in window,
                multiTouch: navigator.maxTouchPoints > 1,
                vibration: 'vibrate' in navigator,
                orientation: 'orientation' in screen,
                deviceMotion: 'DeviceMotionEvent' in window,
                deviceOrientation: 'DeviceOrientationEvent' in window
            };
            
            tester.logInteraction('gesture', 'Device capabilities detected:');
            Object.entries(capabilities).forEach(([key, value]) => {
                tester.logInteraction('gesture', `  ${key}: ${value ? 'Yes' : 'No'}`);
            });
            
            // Log device info
            tester.logInteraction('gesture', `Screen: ${screen.width}x${screen.height}`);
            tester.logInteraction('gesture', `Viewport: ${window.innerWidth}x${window.innerHeight}`);
            tester.logInteraction('gesture', `Pixel ratio: ${window.devicePixelRatio}`);
            tester.logInteraction('gesture', `Max touch points: ${navigator.maxTouchPoints || 'Unknown'}`);
        });
    </script>
</body>
</html>